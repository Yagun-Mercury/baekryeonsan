<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ë°±ë ¨ì‚° ì—­í•  ë°°ì •ê¸°</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
    .page { display: none; }
    .active { display: block; }
    .character-button {
      display: inline-block; margin: 5px; padding: 10px 15px;
      border: 1px solid #ccc; border-radius: 5px;
      background-color: white; cursor: pointer;
    }
    .character-button.selected { background-color: #007bff; color: white; }
    .tabs { margin-bottom: 10px; }
    .tab {
      display: inline-block; padding: 10px 20px; border: 1px solid #ccc;
      cursor: pointer; background-color: white;
    }
    .tab.active { background-color: #007bff; color: white; }
    .circle-container {
      position: relative; width: 900px; height: 900px; margin: 0 auto;
    }
    .circle-item {
      position: absolute; width: 100px; height: 100px; line-height: 1.2em; text-align: center;
      border-radius: 8px; background-color: white; color: black; cursor: pointer;
      padding: 10px; box-sizing: border-box; border: 1px solid #ccc; white-space: pre-line;
      user-select: none;
    }
    .student { background-color: #fffacd !important; }
    .threat { background-color: #98fb98 !important; }
    .council { background-color: #e6e6fa !important; }
    .role-input-container {
      display: flex; flex-direction: column; align-items: flex-start; gap: 5px;
    }
    .circle-item.threat-border { border: 3px solid red !important; }
    .circle-item.council-border { border: 3px solid purple !important; }
    .circle-item.fool-border { box-shadow: 0 0 0 4px yellow inset !important; }
    .circle-item.antibody-face { background-color: #8ecaff !important; }
    .circle-item.infected-face { background-color: #90ee90 !important; }
    .circle-item.stun-x { position: relative; }
    .circle-item.stun-x::after {
      content: ""; position: absolute; left: 10px; top: 10px; width: 80px; height: 80px;
      border: 8px solid #e00; border-radius: 50%;
      background: repeating-linear-gradient(45deg,#fff0,#fff0 10px,#e00 10px,#e00 20px);
      mix-blend-mode: multiply; pointer-events:none; display: block;
    }
    .circle-item.protect-shield::before {
      content: "ğŸ›¡"; position: absolute; left: 8px; top: 8px; font-size: 2.5em; z-index: 2; pointer-events: none;
    }
    .circle-item.interfere-bg {
      background: repeating-linear-gradient(
        135deg, #fff, #fff 10px, orange 10px, orange 16px
      ) !important;
    }
    .circle-item .infect-label {
      display: block; font-size: 1.1em; color: #008800; font-weight: bold; margin-top: 6px;
    }
  </style>
</head>
<body>
  <div id="page1" class="page active">
    <h2>ë“±ì¥ì¸ë¬¼ ì„ íƒ</h2>
    <div id="character-selection"></div>
    <button onclick="selectAllCharacters()">ì „ì²´ ì„ íƒ</button>
    <button onclick="goToNextPage()">ë‹¤ìŒ</button>
  </div>
  <div id="page2" class="page">
    <h2>ì†Œì† ì¸ì› ìˆ˜ ì²´í¬</h2>
    <div class="role-input-container">
      <label>í•™ìƒíšŒ: <input type="number" id="student-count" value="" /></label>
      <label>ìœ„í˜‘: <input type="number" id="threat-count" value="" /></label>
      <label>ì´ì‚¬íšŒ: <input type="number" id="council-count" value="" /></label>
      <label>í•­ì²´ë³´ìœ ì: <input type="number" id="antibody-count" value="" /></label>
      <label>ë°”ë³´ê·€ì‹ : <input type="number" id="fool-count" value="" /></label>
    </div>
    <button onclick="assignRoles()">ì—­í•  ë°°ì •</button>
    <button onclick="goToPrevPage1()">ì´ì „</button>
  </div>
  <div id="seating-page" class="page">
    <h2>ìë¦¬ ë°°ì¹˜</h2>
    <div class="circle-container" id="circle-container-seating"></div>
    <button onclick="goToPrevPage2()">ì´ì „</button>
    <button onclick="startGame()">ê²Œì„ ì‹œì‘</button>
  </div>
  <div id="day1-page" class="page">
    <h2>1ì¼ì°¨ ê²Œì„ ì§„í–‰</h2>
    <div class="circle-container" id="circle-container-day1"></div>
    <button onclick="goToDay2Page()">2ì¼ì°¨ë¡œ ì´ë™</button>
    <button onclick="goToPrevFromDay1()">ì´ì „</button>
  </div>
  <div id="day2-page" class="page">
    <h2>2ì¼ì°¨ ê²Œì„ ì§„í–‰</h2>
    <div class="circle-container" id="circle-container-day2"></div>
    <button onclick="goToDay3Page()">3ì¼ì°¨ë¡œ ì´ë™</button>
    <button onclick="goToPrevFromDay2()">ì´ì „</button>
  </div>
  <div id="day3-page" class="page">
    <h2>3ì¼ì°¨ ê²Œì„ ì§„í–‰</h2>
    <div class="circle-container" id="circle-container-day3"></div>
    <button onclick="goToDay4Page()">4ì¼ì°¨ë¡œ ì´ë™</button>
    <button onclick="goToPrevFromDay3()">ì´ì „</button>
  </div>
  <div id="day4-page" class="page">
    <h2>4ì¼ì°¨ ê²Œì„ ì§„í–‰</h2>
    <div class="circle-container" id="circle-container-day4"></div>
    <button onclick="goToDay5Page()">5ì¼ì°¨ë¡œ ì´ë™</button>
    <button onclick="goToPrevFromDay4()">ì´ì „</button>
  </div>
  <div id="day5-page" class="page">
    <h2>5ì¼ì°¨ ê²Œì„ ì§„í–‰</h2>
    <div class="circle-container" id="circle-container-day5"></div>
    <button onclick="goToPrevFromDay5()">ì´ì „</button>
  </div>

  <!-- íŒì—… ëª¨ë‹¬ ìš”ì†Œ -->
  <div id="status-modal" style="display:none;position:fixed;left:0;top:0;width:100vw;height:100vh;z-index:9999;background:rgba(0,0,0,0.25);align-items:center;justify-content:center;">
    <div id="status-modal-inner" style="background:#fff;padding:32px 24px 20px 24px;border-radius:12px;box-shadow:0 4px 32px #0002;min-width:270px;position:relative;">
      <div style="font-size:1.15em;font-weight:bold;margin-bottom:12px;" id="modal-title"></div>
      <div>
        <label><input type="checkbox" id="modal-infected"> ê°ì—¼</label><br>
        <label><input type="checkbox" id="modal-interfere"> ë°©í•´</label><br>
        <label><input type="checkbox" id="modal-protect"> ë³´í˜¸</label><br>
        <label><input type="checkbox" id="modal-stun"> ê¸°ì ˆ</label>
      </div>
      <div style="margin-top:14px;text-align:right;">
        <button id="modal-save-btn" style="padding:4px 18px;">ì €ì¥</button>
        <button onclick="closeStatusModal()" style="padding:4px 14px;">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <script>
    let assignedGlobal = [];
    const characters = [
      "í•™ìƒíšŒì¥", "ì „êµ 1ë“±", "ì „êµ 2ë“±", "ì„ ë„ë¶€ì¥", "ì²´ìœ¡ë¶€ì¥",
      "ë°©ì†¡ë¶€", "ì¶•êµ¬ë¶€ ì£¼ì¥", "ì‹œë°±ì˜ ì™¼íŒ”", "ì‹œë°±ì˜ ì˜¤ë¥¸íŒ”",
      "ë¶ˆëŸ‰í•™ìƒ", "ì „í•™ìƒ", "êµì¥ì„ ìƒë‹˜", "í•™ìƒì£¼ì„", "ì–‘í˜¸ì„ ìƒë‹˜",
      "êµìƒì„ ìƒë‹˜", "ë¯¸ìˆ ì„ ìƒë‹˜", "ìœ¤ë¦¬ì„ ìƒë‹˜", "ì‚¬ì„œì„ ìƒë‹˜",
      "ì˜ì–‘ì‚¬", "ê²½ë¹„ì•„ì €ì”¨", "í•´ì»¤", "ë³´ì•ˆê´€", "íŒ¨ì…˜ì™•",
      "í…Œí¬ìœ íŠœë²„", "ë°´ë“œë¶€ ë³´ì»¬", "ë§¤ì  ìíŒê¸°", "ë°±ë ¨ì‚° ë„ì‚¬", "ë°±ë ¨ì‚° ì•„ê¸°ê³°"
    ];
    const selectionDiv = document.getElementById("character-selection");
    characters.forEach(name => {
      const button = document.createElement("div");
      button.className = "character-button";
      button.textContent = name;
      button.onclick = () => button.classList.toggle("selected");
      selectionDiv.appendChild(button);
    });
    function goToNextPage() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("page2").classList.add("active");
    }
    function assignRoles() {
      const selected = Array.from(document.getElementsByClassName("character-button selected"))
                            .map(btn => btn.textContent);
      if (selected.length === 0) return alert("ë“±ì¥ì¸ë¬¼ì„ ì„ íƒí•˜ì„¸ìš”.");
      const studentCount = parseInt(document.getElementById("student-count").value);
      const threatCount = parseInt(document.getElementById("threat-count").value);
      const councilCount = parseInt(document.getElementById("council-count").value);
      const antibodyCount = parseInt(document.getElementById("antibody-count").value);
      const foolCount = parseInt(document.getElementById("fool-count").value);
      const total = studentCount + threatCount + councilCount;
      if (selected.length < total) {
        return alert("ì„ íƒí•œ ë“±ì¥ì¸ë¬¼ ìˆ˜ê°€ ì†Œì† ì¸ì›ë³´ë‹¤ ì ìŠµë‹ˆë‹¤.");
      }
      const roles = [];
      for (let i = 0; i < studentCount; i++) roles.push("í•™ìƒíšŒ");
      for (let i = 0; i < threatCount; i++) roles.push("ìœ„í˜‘");
      for (let i = 0; i < councilCount; i++) roles.push("ì´ì‚¬íšŒ");
      shuffle(roles);

      const assigned = selected.slice(0, total).map((name, index) => ({
        name,
        role: roles[index],
        antibody: false,
        fool: false,
        infected: 0,
        stun: false,
        protect: false,
        interfere: false
      }));
      shuffle(assigned);
      if(typeof assignAntibodyAndFool === "function")
        assignAntibodyAndFool(assigned, antibodyCount, foolCount);
      if(typeof assignInitialInfected === "function")
        assignInitialInfected(assigned, threatCount);
      assignedGlobal = assigned;
      showSeatingPage("circle-container-seating", assigned);
    }
    function showSeatingPage(containerId, assigned) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("seating-page").classList.add("active");
      const container = document.getElementById(containerId);
      container.innerHTML = "";

      const count = assigned.length;
      const radius = 350;
      const centerX = 450;
      const centerY = 450;

      assigned.forEach((char, i) => {
        const angle = (2 * Math.PI * i) / count;
        const x = centerX + radius * Math.cos(angle) - 50;
        const y = centerY + radius * Math.sin(angle) - 50;

        const div = document.createElement("div");
        div.className = "circle-item";
        div.style.left = `${x}px`;
        div.style.top = `${y}px`;
        div.textContent = `${i + 1}ë²ˆ\n${char.name}`;
        div.dataset.state = "hidden";
        div.onclick = function () {
          if (div.dataset.state === "hidden") {
            div.dataset.state = "revealed";
            div.textContent = `${i + 1}ë²ˆ\n${char.name}\n(${char.role})`;
            if (char.role === "í•™ìƒíšŒ") div.classList.add("student");
            if (char.role === "ìœ„í˜‘") div.classList.add("threat");
            if (char.role === "ì´ì‚¬íšŒ") div.classList.add("council");
          } else {
            div.dataset.state = "hidden";
            div.classList.remove("student", "threat", "council");
            div.textContent = `${i + 1}ë²ˆ\n${char.name}`;
          }
        };
        container.appendChild(div);
      });
    }
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
    function selectAllCharacters() {
      document.querySelectorAll(".character-button").forEach(btn => btn.classList.add("selected"));
    }
    function goToPrevPage1() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("page1").classList.add("active");
    }
    function goToPrevPage2() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("page2").classList.add("active");
    }
    // ì•„ë˜ëŠ” ìë¦¬ë°°ì¹˜ ì´ì „ë§Œ ì‚¬ìš©
    function goToPrevFromDay1() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("seating-page").classList.add("active");
      showSeatingPage("circle-container-seating", assignedGlobal);
    }
  </script>

  <!-- í™•ì¥ ìŠ¤í¬ë¦½íŠ¸: í•­ì²´, ë°”ë³´, ìµœì´ˆ ê°ì—¼ì ë°°ì • -->
  <script>
    function assignAntibodyAndFool(assigned, antibodyCount, foolCount) {
      // í•­ì²´ ì „ì²´ ëœë¤ ë°°ì • (ì¤‘ë³µX)
      const allIdx = [...Array(assigned.length).keys()];
      shuffle(allIdx);
      allIdx.slice(0, antibodyCount).forEach(idx => assigned[idx].antibody = true);

      // ë°”ë³´ê·€ì‹ : í•™ìƒíšŒ ì†Œì†ë§Œ ëœë¤
      const studentIdx = assigned.map((c, i) => c.role === "í•™ìƒíšŒ" ? i : -1).filter(idx => idx !== -1);
      shuffle(studentIdx);
      studentIdx.slice(0, foolCount).forEach(idx => assigned[idx].fool = true);
    }
    function assignInitialInfected(assigned, threatCount) {
      // ìœ„í˜‘/í•­ì²´ ì œì™¸í•œ ì¸ë±ìŠ¤ ì¶”ì¶œ
      const infectableIdx = assigned.map((c,i) =>
        (!c.antibody && c.role !== "ìœ„í˜‘" ? i : -1)
      ).filter(idx => idx !== -1);
      shuffle(infectableIdx);
      infectableIdx.slice(0, threatCount).forEach(idx => assigned[idx].infected = "ìµœì´ˆ");
    }
  </script>

  <!-- íŒì—…/ê²Œì„ì§„í–‰í˜ì´ì§€ìš© í™•ì¥: renderDayCircleStatus -->
  <script>
    // íŒì—… ë³€ìˆ˜
    let modalTargetChar = null, modalTargetIdx = null, modalTargetContainerId = null;
    function openStatusModal(char, idx, containerId) {
      modalTargetChar = char;
      modalTargetIdx = idx;
      modalTargetContainerId = containerId;
      document.getElementById('modal-title').innerText = `${idx+1}ë²ˆ ${char.name} ìƒíƒœ ì„¤ì •`;
      document.getElementById('modal-infected').checked = !!char.infected;
      document.getElementById('modal-interfere').checked = !!char.interfere;
      document.getElementById('modal-protect').checked = !!char.protect;
      document.getElementById('modal-stun').checked = !!char.stun;
      document.getElementById('status-modal').style.display = "flex";
    }
    function closeStatusModal() {
      document.getElementById('status-modal').style.display = "none";
      modalTargetChar = null;
      modalTargetIdx = null;
      modalTargetContainerId = null;
    }
    document.getElementById('modal-save-btn').onclick = function() {
      if(!modalTargetChar) return;
      if(document.getElementById('modal-infected').checked) {
        if(!modalTargetChar.infected) modalTargetChar.infected = "1ì¼";
      } else {
        modalTargetChar.infected = 0;
      }
      modalTargetChar.interfere = document.getElementById('modal-interfere').checked;
      modalTargetChar.protect = document.getElementById('modal-protect').checked;
      modalTargetChar.stun = document.getElementById('modal-stun').checked;
      renderDayCircleStatus(modalTargetContainerId, assignedGlobal);
      closeStatusModal();
    }

    // renderDayCircleStatus (ê²Œì„ì§„í–‰ í˜ì´ì§€ì—ì„œë§Œ)
    function renderDayCircleStatus(containerId, states) {
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      const count = states.length;
      const radius = 350;
      const centerX = 450, centerY = 450;
      states.forEach((char, i) => {
        const angle = (2 * Math.PI * i) / count;
        const x = centerX + radius * Math.cos(angle) - 50;
        const y = centerY + radius * Math.sin(angle) - 50;
        const div = document.createElement("div");
        div.className = "circle-item";
        div.style.left = `${x}px`;
        div.style.top = `${y}px`;

        if(char.role === "ìœ„í˜‘") div.classList.add("threat-border");
        if(char.role === "ì´ì‚¬íšŒ") div.classList.add("council-border");
        if(char.fool) div.classList.add("fool-border");
        if(char.antibody) div.classList.add("antibody-face");
        if(char.infected && char.infected !== 0) {
          div.classList.add("infected-face");
          let label = "ê°ì—¼";
          if(char.infected === "ìµœì´ˆ") label = "ìµœì´ˆ";
          else if(typeof char.infected === "number" || (typeof char.infected === "string" && char.infected.endsWith("ì¼"))) label = char.infected;
          const span = document.createElement("span");
          span.className = "infect-label";
          span.textContent = label;
          div.appendChild(span);
        }
        if(char.interfere) div.classList.add("interfere-bg");
        if(char.protect) div.classList.add("protect-shield");
        if(char.stun) div.classList.add("stun-x");

        div.textContent = `${i+1}ë²ˆ\n${char.name}`;
        div.onclick = function() { openStatusModal(char, i, containerId); };
        container.appendChild(div);
      });
    }

    // ê²Œì„ì§„í–‰ í˜ì´ì§€ ì´ë™ì‹œë§ˆë‹¤ renderDayCircleStatusë§Œ ì‚¬ìš©í•˜ë„ë¡ ë®ì–´ì“°ê¸°
    startGame = function() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("day1-page").classList.add("active");
      renderDayCircleStatus("circle-container-day1", assignedGlobal);
    }
    goToDay2Page = function() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("day2-page").classList.add("active");
      renderDayCircleStatus("circle-container-day2", assignedGlobal);
    }
    goToDay3Page = function() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("day3-page").classList.add("active");
      renderDayCircleStatus("circle-container-day3", assignedGlobal);
    }
    goToDay4Page = function() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("day4-page").classList.add("active");
      renderDayCircleStatus("circle-container-day4", assignedGlobal);
    }
    goToDay5Page = function() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("day5-page").classList.add("active");
      renderDayCircleStatus("circle-container-day5", assignedGlobal);
    }
    goToPrevFromDay2 = function() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("day1-page").classList.add("active");
      renderDayCircleStatus("circle-container-day1", assignedGlobal);
    }
    goToPrevFromDay3 = function() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("day2-page").classList.add("active");
      renderDayCircleStatus("circle-container-day2", assignedGlobal);
    }
    goToPrevFromDay4 = function() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("day3-page").classList.add("active");
      renderDayCircleStatus("circle-container-day3", assignedGlobal);
    }
    goToPrevFromDay5 = function() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById("day4-page").classList.add("active");
      renderDayCircleStatus("circle-container-day4", assignedGlobal);
    }
  </script>
</body>
</html>
<script>
// --- ìƒíƒœ ì…ë ¥ ì„ì‹œì €ì¥ (ì˜¤ëŠ˜ ì…ë ¥ â†’ ë‚´ì¼ íš¨ê³¼)
if(!window._nextDayStatus) window._nextDayStatus = {}; // { '1': [{interfere:true, protect:false, stun:true}, ...], ... }

// íŒì—… ì €ì¥ ë²„íŠ¼ ë®ì–´ì“°ê¸°: ì˜¤ëŠ˜ ì²´í¬í•œ ê²ƒì€ ë‚´ì¼ë§Œ ë°˜ì˜!
document.getElementById('modal-save-btn').onclick = function() {
  if(!modalTargetChar) return;
  // í˜„ì¬ í˜ì´ì§€(dayN-page)ì—ì„œ N ì¶”ì¶œ
  let currDay = 1;
  for(let d=1; d<=5; d++) {
    if(document.getElementById(`day${d}-page`)?.classList.contains('active')) {
      currDay = d;
      break;
    }
  }
  // _nextDayStatusì˜ ë‚´ì¼ ë°°ì—´ ì¤€ë¹„
  if(!_nextDayStatus[currDay+1]) _nextDayStatus[currDay+1] = [];
  let arr = _nextDayStatus[currDay+1];
  // ìºë¦­í„° ì¸ë±ìŠ¤ ë§ê²Œ ë°°ì—´ ì‚¬ì´ì¦ˆ ë§ì¶”ê¸°
  while(arr.length < assignedGlobal.length) arr.push({});
  // ì˜¤ëŠ˜ ì²´í¬í•œ ê°’ì„ ë‚´ì¼ë¡œ ë¯¸ë£¬ë‹¤
  arr[modalTargetIdx] = {
    interfere: document.getElementById('modal-interfere').checked,
    protect: document.getElementById('modal-protect').checked,
    stun: document.getElementById('modal-stun').checked,
  };
  // ê°ì—¼(ì¦‰ì‹œ)ë§Œ ì‹¤ì‹œê°„ ë°˜ì˜, ë‚˜ë¨¸ì§€ëŠ” ë‚´ì¼ë§Œ ë°˜ì˜
  if(document.getElementById('modal-infected').checked) {
    if(!modalTargetChar.infected) modalTargetChar.infected = `${currDay}ì¼`;
  } else {
    modalTargetChar.infected = 0;
  }
  renderDayCircleStatus(modalTargetContainerId, assignedGlobal, currDay);
  closeStatusModal();
}

// renderDayCircleStatus í•¨ìˆ˜ í™•ì¥: í˜„ì¬ ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ ë°©í•´/ë³´í˜¸/ê¸°ì ˆë§Œ í‘œì‹œ
const _prev_renderDayCircleStatus = renderDayCircleStatus;
renderDayCircleStatus = function(containerId, states, currDay=1) {
  const container = document.getElementById(containerId);
  container.innerHTML = "";
  const count = states.length;
  const radius = 350;
  const centerX = 450, centerY = 450;
  // "ë‚´ì¼" íš¨ê³¼ë¥¼ ì ìš©í•  ì¼ì°¨
  let statusArr = _nextDayStatus[currDay] || [];
  states.forEach((char, i) => {
    const angle = (2 * Math.PI * i) / count;
    const x = centerX + radius * Math.cos(angle) - 50;
    const y = centerY + radius * Math.sin(angle) - 50;
    const div = document.createElement("div");
    div.className = "circle-item";
    div.style.left = `${x}px`;
    div.style.top = `${y}px`;

    // ê¸°ì¡´ ìƒíƒœ: ìœ„í˜‘/ì´ì‚¬íšŒ/ë°”ë³´/í•­ì²´/ê°ì—¼
    if(char.role === "ìœ„í˜‘") div.classList.add("threat-border");
    if(char.role === "ì´ì‚¬íšŒ") div.classList.add("council-border");
    if(char.fool) div.classList.add("fool-border");
    if(char.antibody) div.classList.add("antibody-face");
    if(char.infected && char.infected !== 0) {
      div.classList.add("infected-face");
      let label = "ê°ì—¼";
      if(char.infected === "ìµœì´ˆ") label = "ìµœì´ˆ";
      else if(typeof char.infected === "number" || (typeof char.infected === "string" && char.infected.endsWith("ì¼"))) label = char.infected;
      const span = document.createElement("span");
      span.className = "infect-label";
      span.textContent = label;
      div.appendChild(span);
    }
    // ë°©í•´/ë³´í˜¸/ê¸°ì ˆ: ì˜¤ëŠ˜ ì…ë ¥í•œ ê°’ì€ ë‚´ì¼ì—ë§Œ! (ì˜¤ëŠ˜ì€ statusArr ì‚¬ìš©)
    let st = statusArr[i] || {};
    if(st.interfere) div.classList.add("interfere-bg");
    if(st.protect) div.classList.add("protect-shield");
    if(st.stun) div.classList.add("stun-x");

    div.textContent = `${i+1}ë²ˆ\n${char.name}`;
    div.onclick = function() { openStatusModal(char, i, containerId); };
    container.appendChild(div);
  });
}

// ê° ì¼ì°¨ ì´ë™ í•¨ìˆ˜ë„ dayNê°’ ë„˜ê²¨ì„œ í™•ì¥ëœ render ì‚¬ìš©
startGame = function() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById("day1-page").classList.add("active");
  renderDayCircleStatus("circle-container-day1", assignedGlobal, 1);
}
goToDay2Page = function() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById("day2-page").classList.add("active");
  renderDayCircleStatus("circle-container-day2", assignedGlobal, 2);
}
goToDay3Page = function() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById("day3-page").classList.add("active");
  renderDayCircleStatus("circle-container-day3", assignedGlobal, 3);
}
goToDay4Page = function() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById("day4-page").classList.add("active");
  renderDayCircleStatus("circle-container-day4", assignedGlobal, 4);
}
goToDay5Page = function() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById("day5-page").classList.add("active");
  renderDayCircleStatus("circle-container-day5", assignedGlobal, 5);
}
goToPrevFromDay2 = function() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById("day1-page").classList.add("active");
  renderDayCircleStatus("circle-container-day1", assignedGlobal, 1);
}
goToPrevFromDay3 = function() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById("day2-page").classList.add("active");
  renderDayCircleStatus("circle-container-day2", assignedGlobal, 2);
}
goToPrevFromDay4 = function() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById("day3-page").classList.add("active");
  renderDayCircleStatus("circle-container-day3", assignedGlobal, 3);
}
goToPrevFromDay5 = function() {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById("day4-page").classList.add("active");
  renderDayCircleStatus("circle-container-day4", assignedGlobal, 4);
}
</script>
